# 🎯 GizeBets Dynamic Automated Posts System

מערכת אוטומציה חכמה לערוץ הטלגרם **@africansportdata** עם תוכן דינאמי באנגלית.

## ✨ תכונות עיקריות

### 📊 **תוכן דינאמי אוטומטי**
- **Smart Top 5 Match Selection** - בחירה חכמה של 5 המשחקים הטובים ביותר
- **Dynamic Timing** - תזמון מותאם לזמני המשחקים האמיתיים
- **Real-Time Results** - תוצאות באמת בערב לאחר סיום המשחקים
- **Custom Promo Codes** - קודי פרומו ניתנים לעריכה דרך הממשק
- **Click Tracking & Analytics** - מעקב קליקים ודוחות מתקדמים

### 🎮 **ממשק ניהול מתקדם**
- ⚙️ **ניהול הגדרות** - שליטה מלאה בקודי קופון וכתובת אתר
- 🌐 **כתובת אתר ניתנת לעריכה** - שינוי כתובת האתר דרך הממשק
- 🎁 **קודי פרומו מותאמים אישית** - ניהול קודי הפרומו לכל סוגי ההודעות
- 🤖 **תזמון דינאמי** - מבוסס על זמני המשחקים האמיתיים

### 🎯 **מערכת תזמון דינאמית חדשה**
- 🌅 **הגדרה יומית**: כל בוקר בשעה 6 - טעינת Top 5 משחקים עם נתונים מפורטים  
- ⏰ **תזמון חכם**: בדיקה כל 30 דקות + שליחת תחזיות 2-3 שעות לפני המשחק
- 📊 **נתונים משופרים**: סטטיסטיקות אמיתיות (פורם, H2H, ממוצע גולים, אחוזי ניצחון)
- 🇺🇸 **תוכן אנגלית מקצועי**: ניתוח הימורים עם רמות ביטחון והערכת סיכונים
- 🚫 **אפס Mock Data**: רק מידע אמיתי מ-football-data.org API
- 🎮 **שליטה מלאה**: קודי פרומו דינאמיים, כתובת אתר, והגדרות פרסום
- 📈 **אנליטיקה**: מעקב קליקים, UTM parameters, ומעקב ביצועים
- 🎨 **עיצוב מקצועי**: פורמט HTML עם bold, italic, קוד בלוקים ומפרידים ויזואליים

### 🤖 **פקודות אדמין טלגרם (חדש!)**
- 🎁 **`/sendpromo [category]`** - שליחת הודעת פרומו מיידית
- 💰 **`/sendbonus ALL "message"`** - שליחת קוד בונוס לכולם
- ⚽ **`/predictions`** - שליחת תחזיות משחקים ידנית
- 📊 **`/results`** - שליחת תוצאות משחקים
- 📈 **`/status`** - קבלת סטטוס המערכת
- ❓ **`/help`** - הצגת כל הפקודות הזמינות
- 🛡️ **אבטחת אדמין**: רק משתמשים מורשים יכולים להפעיל פקודות
- 🎯 **אימות זהות**: בדיקת Telegram User ID מול רשימת אדמינים

---

## 🚀 התקנה והפעלה

### 1. **שכפול הפרויקט**
```bash
git clone <repository-url>
cd gizebets-system
```

### 2. **התקנת תלויות**
```bash
npm install
```

### 3. **הגדרת משתני סביבה**
```bash
cp .env.example .env
```

ערוך את הקובץ `.env` עם הנתונים שלך:

```env
# Telegram Bot Configuration
TELEGRAM_BOT_TOKEN=YOUR_BOT_TOKEN_FROM_BOTFATHER
CHANNEL_ID=@africansportdata

# Admin Users for Bot Commands (NEW!)
ADMIN_USER_IDS=123456789,987654321

# OpenAI API
OPENAI_API_KEY=YOUR_OPENAI_API_KEY

# Football APIs
FOOTBALL_API_KEY=YOUR_FOOTBALL_DATA_API_KEY
RAPID_API_KEY=YOUR_RAPID_API_KEY
```

**🤖 הגדרת פקודות אדמין:**
1. **קבל את הTelegram ID שלך:** שלח הודעה ל-@userinfobot בטלגרם
2. **העתק את הUser ID** המספרי שתקבל
3. **הוסף לקובץ .env:** החלף את `123456789` ב-ID שלך
4. **מספר אדמינים:** הפרד עם פסיקים לכמה אדמינים

### 4. **הפעלת המערכת**

**פיתוח:**
```bash
npm run dev
```

**ייצור:**
```bash
npm run build
npm start
```

### 5. **גישה לממשק הניהול**
פתח את הדפדפן ועבור לכתובת: `http://localhost:3000`

---

## 📱 הגדרת הבוט בטלגרם

### 1. **פרטי הבוט הקיים**
- **שם הבוט:** Sportbot
- **Username:** @Sportmsterbot  
 - **טוקן:** כבר מוגדר במערכת
 - **ערוץ:** @africansportdata

### 2. **הוספת הבוט לערוץ**
1. הוסף את הבוט כמנהל בערוץ `@africansportdata`
2. תן לבוט הרשאות:
   - ✅ Post Messages
   - ✅ Edit Messages
   - ✅ Delete Messages
   - ✅ Add Members

### 3. **הפעלת פקודות אדמין (חדש!)**
1. **בדשבורד:** עבור ל-http://localhost:3000
2. **לחץ על 🤖 Bot Commands** בכותרת העליונה
3. **לחץ על 🚀 Start Bot Commands** כדי להפעיל
4. **בדוק סטטוס:** וודא שמופיע "✅ Active"

### 4. **בדיקת חיבור**
לאחר הגדרת הטוקן, בדוק את החיבור:
```bash
curl http://localhost:3000/api/status
```

**בדיקת פקודות הבוט:**
שלח הודעה `/help` לבוט @Sportmsterbot בטלגרם כדי לראות את כל הפקודות הזמינות.

---

## 🔧 API Documentation

### **בסיסיים**

#### `GET /api/status`
בדיקת סטטוס המערכת
```json
{
  "success": true,
  "system": {
    "status": "running",
    "dailyStats": {
      "predictionsPosted": 5,
      "resultsPosted": 1,
      "promosPosted": 3
    }
  }
}
```

#### `POST /api/start`
הפעלת המערכת האוטומטית
```bash
curl -X POST http://localhost:3000/api/start
```

### **פעולות ידניות**

#### `POST /api/manual/predictions`
שליחת ניבויים ידנית
```bash
curl -X POST http://localhost:3000/api/manual/predictions
```

#### `POST /api/manual/results`
שליחת תוצאות ידנית
```bash
curl -X POST http://localhost:3000/api/manual/results
```

#### `POST /api/manual/promo`
שליחת פרומו ידני
```bash
curl -X POST http://localhost:3000/api/manual/promo \
  -H "Content-Type: application/json" \
  -d '{"promoType": "football"}'
```

#### `POST /api/manual/bonus`
שליחת בונוס מותאם אישית
```bash
curl -X POST http://localhost:3000/api/manual/bonus \
  -H "Content-Type: application/json" \
  -d '{"bonusText": "ልዩ ቦናስ! 100% እስከ 1000 ብር!"}'
```

### **אנליטיקס**

#### `GET /api/analytics`
צפייה בנתוני ביצועים
```bash
curl http://localhost:3000/api/analytics
```

---

## 📅 לוח זמנים אוטומטי

| תוכן | זמן | תדירות | תיאור |
|------|-----|---------|--------|
| **ניבויים** | 08:00-20:00 | כל שעתיים | Top 5 ניבויי משחקים |
| **תוצאות** | 23:00 | יומי | תוצאות המשחקים מאתמול |
| **פרומו בוקר** | 10:00 | יומי | בונוס בוקר |
| **פרומו צהריים** | 14:00 | יומי | בונוס אחר הצהריים |
| **פרומו ערב** | 18:00 | יומי | בונוס ערב |
| **אנליטיקס** | 00:00 | יומי | דוח יומי |

---

## 🎮 ממשק הניהול

הממשק כולל:

### **לוח בקרה**
- 🚀 הפעלת המערכת
- ⚽ שליחת ניבויים ידנית
- 📊 שליחת תוצאות ידנית
- 🎁 שליחת פרומו כדורגל
- 🎰 שליחת פרומו קזינו
- 💰 שליחת בונוס מותאם

### **מידע בזמן אמת**
- סטטוס המערכת (פועל/מופסק)
- זמן אתיופיה נוכחי
- מספר הודעות שנשלחו היום
- מספר שגיאות
- סך כל הקליקים

### **תזמון אוטומטי**
- מידע על המשימות המתוזמנות
- זמנים הבאים לשליחה
- סוגי התוכן ולוח הזמנים

---

## 🌟 תכונות מתקדמות

### **מעקב קליקים**
- מעקב אחר כל קליק בכפתורים
- נתוני CTR (Click Through Rate)
- דוחות ביצועים יומיים
- המלצות לשיפור

### **יצירת תוכן חכמה**
- שילוב מספר מקורות נתונים
- תוכן מותאם לאזור הזמן המקומי
- שפה טבעית באמהרית
- התאמה לסגנון הערוץ

### **אמינות גבוהה**
- מנגנון fallback למקרה של כשל
- ניסיונות חוזרים אוטומטיים
- לוגים מפורטים
- בדיקות שרות אוטומטיות

---

## 🚀 העלאה לייצור (Vercel)

### 1. **הכנת הפרויקט**
```bash
npm run build
```

### 2. **העלאה לVercel**
```bash
# התקנת Vercel CLI
npm i -g vercel

# העלאה
vercel --prod
```

### 3. **הגדרת משתני סביבה בVercel**
עבור להגדרות הפרויקט בVercel והוסף:
- `TELEGRAM_BOT_TOKEN`
- `CHANNEL_ID`
- `OPENAI_API_KEY`
- `FOOTBALL_API_KEY`

### 4. **הפעלת המערכת**
לאחר העלאה מוצלחת:
```bash
curl -X POST https://your-domain.vercel.app/api/start
```

---

## 🔧 פתרון בעיות נפוצות

### **הבוט לא שולח הודעות**
1. ✅ ודא שהטוקן נכון
2. ✅ ודא שהבוט מנהל בערוץ
3. ✅ בדוק את ID הערוץ
4. ✅ ודא שאין חסימות API

### **תוכן לא נוצר**
1. ✅ בדוק מפתח OpenAI
2. ✅ ודא יתרה חשבון OpenAI
3. ✅ בדוק חיבור לאינטרנט
4. ✅ ודא שAPI של הכדורגל פועל

### **שגיאות זמנים**
1. ✅ ודא הגדרת timezone נכונה
2. ✅ בדוק אזור זמן השרת
3. ✅ ודא שההגדרות cron נכונות

---

## 📞 תמיכה

לשאלות ותמיכה:
- 📧 אימייל: support@gizebets.et
- 💬 טלגרם: @gizebetsupport
- 🌐 אתר: https://gizebets.et

---

## 📄 רישיון

הפרויקט מוגן בזכויות יוצרים ומיועד לשימוש פרטי בלבד.

---

**🎯 GizeBets - המערכת המתקדמת ביותר לניהול תוכן אוטומטי בטלגרם!**